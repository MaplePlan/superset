"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[4790],{64790:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var r=n(78580),l=n.n(r),c=n(67294),a=n(63475),u=n(92638),s=n(11965);function h(e){let{height:t,width:n,echartOptions:r,setDataMask:h,labelMap:i,groupby:o,selectedValues:f,formData:d,onContextMenu:p}=e;const g=(0,c.useCallback)((e=>{if(!d.emitFilter)return;const t=e.map((e=>i[e]));h({extraFormData:{filters:0===e.length?[]:o.map(((e,n)=>{const r=t.map((e=>e[n]));return null==r?{col:e,op:"IS NULL"}:{col:e,op:"IN",val:r}}))},filterState:{value:t.length?t:null,selectedValues:e.length?e:null}})}),[o,i,h,f]),v={click:e=>{const{data:t,treePathInfo:n}=e;if(null!=t&&t.children)return;const{treePath:r}=(0,u.Im)(n),c=r.join(","),a=Object.values(f);l()(a).call(a,c)?g(a.filter((e=>e!==c))):g([c])},contextmenu:e=>{if(p){e.event.stop();const{treePath:t}=(0,u.Im)(e.treePathInfo);if(t.length>0){const n=e.event.event,r=[];t.forEach(((e,t)=>r.push({col:o[t],op:"==",val:e,formattedVal:e}))),p(r,n.clientX,n.clientY)}}}};return(0,s.tZ)(a.Z,{height:t,width:n,echartOptions:r,eventHandlers:v,selectedValues:f})}},63475:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(78580),l=n.n(r),c=n(67294),a=n(51995),u=n(29027),s=n(11965);const h=a.iK.div`
  height: ${e=>{let{height:t}=e;return t}};
  width: ${e=>{let{width:t}=e;return t}};
`;function i(e,t){let{width:n,height:r,echartOptions:a,eventHandlers:i,zrEventHandlers:o,selectedValues:f={}}=e;const d=(0,c.useRef)(null),p=(0,c.useRef)(),g=(0,c.useMemo)((()=>Object.keys(f)||[]),[f]),v=(0,c.useRef)([]);(0,c.useImperativeHandle)(t,(()=>({getEchartInstance:()=>p.current}))),(0,c.useEffect)((()=>{d.current&&(p.current||(p.current=(0,u.S1)(d.current)),Object.entries(i||{}).forEach((e=>{var t,n;let[r,l]=e;null==(t=p.current)||t.off(r),null==(n=p.current)||n.on(r,l)})),Object.entries(o||{}).forEach((e=>{var t,n;let[r,l]=e;null==(t=p.current)||t.getZr().off(r),null==(n=p.current)||n.getZr().on(r,l)})),p.current.setOption(a,!0))}),[a,i,o]),(0,c.useEffect)((()=>{p.current&&(p.current.dispatchAction({type:"downplay",dataIndex:v.current.filter((e=>!l()(g).call(g,e)))}),g.length&&p.current.dispatchAction({type:"highlight",dataIndex:g}),v.current=g)}),[g]);const w=(0,c.useCallback)((e=>{let{width:t,height:n}=e;p.current&&p.current.resize({width:t,height:n})}),[]);return(0,c.useEffect)((()=>{w({width:n,height:r})}),[]),(0,c.useLayoutEffect)((()=>{w({width:n,height:r})}),[n,r,w]),(0,s.tZ)(h,{ref:d,height:r,width:n})}const o=(0,c.forwardRef)(i)}}]);
//# sourceMappingURL=880bfe931cc068962e05.chunk.js.map