"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[2229],{67869:(e,t,n)=>{n.d(t,{E8:()=>w,CW:()=>d.Z,kI:()=>r,A5:()=>i.Z,Gz:()=>u.Z,Ys:()=>m.Z,$5:()=>p.Z,Dg:()=>f.Z,XF:()=>g.Z,gE:()=>a.Z,yE:()=>y.Z,eL:()=>s.Z,zR:()=>h.Z,UM:()=>v.Z,Bs:()=>b.Z,T8:()=>c.Z,Xs:()=>x.X,Zf:()=>Z.Zf,Gh:()=>Z.Gh,B_:()=>o.Z,Qg:()=>Z.Qg,j3:()=>l.Z,l:()=>x.Z});var r=n(28062),i=n(97466),a=n(15226),o=n(81545),s=n(58586),l=n(45511),c=n(2995),h=n(98195),d=n(27965),u=n(86698),m=n(69224),p=n(77781),f=n(64236),g=n(65445),y=n(36361),v=n(132),b=n(31225),Z=n(25130),x=n(78161);const w="#00A699"},8608:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(62761);function i(e,t,n){let r=e,i=t(r);for(;!n(i);){if(r-=1,r<0){r=e;break}i=t(r)}return r}function a(e){const{idealFontSize:t,maxWidth:n,maxHeight:a,style:o,...s}=e;let l;if(null!=t)l=t;else{if(null==a)throw new Error("You must specify at least one of maxHeight or idealFontSize");l=Math.floor(a)}function c(e){return(0,r.Z)({...s,style:{...o,fontSize:`${e}px`}})}return null!=n&&(l=i(l,c,(e=>e.width>0&&e.width<=n))),null!=a&&(l=i(l,c,(e=>e.height>0&&e.height<=a))),l}},62761:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(10660),i=n(61888),a=n(91572);function o(e,t){const{text:n,className:o,style:s,container:l}=e;if(0===n.length)return{height:0,width:0};const c=a.Y.createInContainer(l),h=a.S.createInContainer(c);(0,r.Z)(h,{className:o,style:s,text:n});const d=(0,i.Z)(h,t);return setTimeout((()=>{a.S.removeFromContainer(c),a.Y.removeFromContainer(l)}),500),d}},4470:(e,t,n)=>{n.d(t,{Z:()=>r});class r{constructor(e){this.activeNodes=new Map,this.factoryFn=void 0,this.factoryFn=e}createInContainer(e){if(void 0===e&&(e=document.body),this.activeNodes.has(e)){const t=this.activeNodes.get(e);return t.counter+=1,t.node}const t=this.factoryFn();return e.append(t),this.activeNodes.set(e,{counter:1,node:t}),t}removeFromContainer(e){if(void 0===e&&(e=document.body),this.activeNodes.has(e)){const t=this.activeNodes.get(e);t.counter-=1,0===t.counter&&(e.removeChild(t.node),this.activeNodes.delete(e))}}}},48691:(e,t,n)=>{n.d(t,{h:()=>r});const r="http://www.w3.org/2000/svg"},24313:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(48691);function i(){const e=document.createElementNS(r.h,"svg");return e.style.position="absolute",e.style.top="-100%",e.style.left="-100%",e.style.width="0",e.style.height="0",e.style.opacity="0",e.style.pointerEvents="none",e}},48e3:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(48691);function i(){return document.createElementNS(r.h,"text")}},91572:(e,t,n)=>{n.d(t,{Y:()=>o,S:()=>s});var r=n(4470),i=n(24313),a=n(48e3);const o=new r.Z(i.Z),s=new r.Z(a.Z)},61888:(e,t,n)=>{n.d(t,{Z:()=>i});const r={height:20,width:100};function i(e,t){void 0===t&&(t=r);const{width:n,height:i}=e.getBBox?e.getBBox():t;return{height:Math.ceil(i),width:Math.ceil(n)}}},10660:(e,t,n)=>{n.d(t,{Z:()=>i});const r=["font","fontWeight","fontStyle","fontSize","fontFamily","letterSpacing"];function i(e,t){let{className:n,style:i={},text:a}=void 0===t?{}:t;const o=e;return o.textContent!==a&&(o.textContent=void 0===a?null:a),o.getAttribute("class")!==n&&o.setAttribute("class",null!=n?n:""),o.style.removeProperty("font"),o.style.removeProperty("font-weight"),o.style.removeProperty("font-style"),o.style.removeProperty("font-size"),o.style.removeProperty("font-family"),o.style.removeProperty("letter-spacing"),r.filter((e=>void 0!==i[e]&&null!==i[e])).forEach((e=>{o.style[e]=`${i[e]}`})),o}},32229:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var r=n(67294),i=n(67190),a=n(61988),o=n(8608),s=n(40962),l=n(67869),c=n(51995),h=n(63475),d=n(11965);const u=(0,i.JB)(),m=.3;class p extends r.PureComponent{getClassName(){const{className:e,showTrendLine:t,bigNumberFallback:n}=this.props,r=`superset-legacy-chart-big-number ${e} ${n?"is-fallback-value":""}`;return t?r:`${r} no-trendline`}createTemporaryContainer(){const e=document.createElement("div");return e.className=this.getClassName(),e.style.position="absolute",e.style.opacity="0",e}renderFallbackWarning(){const{bigNumberFallback:e,formatTime:t,showTimestamp:n}=this.props;return!e||n?null:(0,d.tZ)("span",{className:"alert alert-warning",role:"alert",title:(0,a.t)("Last available value seen on %s",t(e[0]))},(0,a.t)("Not up to date"))}renderKicker(e){const{timestamp:t,showTimestamp:n,formatTime:r,width:i}=this.props;if(!n)return null;const a=null===t?"":r(t),s=this.createTemporaryContainer();document.body.append(s);const l=(0,o.Z)({text:a,maxWidth:i,maxHeight:e,className:"kicker",container:s});return s.remove(),(0,d.tZ)("div",{className:"kicker",style:{fontSize:l,height:e}},a)}renderHeader(e){const{bigNumber:t,headerFormatter:n,width:r}=this.props,i=null===t?(0,a.t)("No data"):n(t),s=this.createTemporaryContainer();document.body.append(s);const l=(0,o.Z)({text:i,maxWidth:r-8,maxHeight:e,className:"header-line",container:s});return s.remove(),(0,d.tZ)("div",{className:"header-line",style:{fontSize:l,height:e},onContextMenu:e=>{this.props.onContextMenu&&(e.preventDefault(),this.props.onContextMenu([],e.nativeEvent.clientX,e.nativeEvent.clientY))}},i)}renderSubheader(e){const{bigNumber:t,subheader:n,width:r,bigNumberFallback:i}=this.props;let s=0;const l=(0,a.t)("No data after filtering or data is NULL for the latest time record"),c=(0,a.t)("Try applying different filters or ensuring your datasource has data");let h=n;if(null===t&&(h=i?c:l),h){const t=this.createTemporaryContainer();return document.body.append(t),s=(0,o.Z)({text:h,maxWidth:r,maxHeight:e,className:"subheader-line",container:t}),t.remove(),(0,d.tZ)("div",{className:"subheader-line",style:{fontSize:s,height:e}},h)}return null}renderTrendline(e){const{width:t,trendLineData:n,echartOptions:r}=this.props;if(null==n||!n.some((e=>null!==e[1])))return null;const i={contextmenu:e=>{if(this.props.onContextMenu){e.event.stop();const{data:a}=e;if(a){var t,n,r,i;const o=e.event.event,s=[];s.push({col:null==(t=this.props.formData)?void 0:t.granularitySqla,grain:null==(n=this.props.formData)?void 0:n.timeGrainSqla,op:"==",val:a[0],formattedVal:null==(r=(i=this.props).xValueFormatter)?void 0:r.call(i,a[0])}),this.props.onContextMenu(s,o.clientX,o.clientY)}}}};return(0,d.tZ)(h.Z,{width:Math.floor(t),height:e,echartOptions:r,eventHandlers:i})}render(){const{showTrendLine:e,height:t,kickerFontSize:n,headerFontSize:r,subheaderFontSize:i}=this.props,a=this.getClassName();if(e){const e=Math.floor(m*t),o=t-e;return(0,d.tZ)("div",{className:a},(0,d.tZ)("div",{className:"text-container",style:{height:o}},this.renderFallbackWarning(),this.renderKicker(Math.ceil(.7*n*t)),this.renderHeader(Math.ceil(.7*r*t)),this.renderSubheader(Math.ceil(.7*i*t))),this.renderTrendline(e))}return(0,d.tZ)("div",{className:a,style:{height:t}},this.renderFallbackWarning(),this.renderKicker(n*t),this.renderHeader(Math.ceil(r*t)),this.renderSubheader(Math.ceil(i*t)))}}p.defaultProps={className:"",headerFormatter:u,formatTime:s.Z,headerFontSize:.3,kickerFontSize:.1,mainColor:l.E8,showTimestamp:!1,showTrendLine:!1,startYAxisAtZero:!0,subheader:"",subheaderFontSize:.125,timeRangeFixed:!1};const f=(0,c.iK)(p)`
  ${e=>{let{theme:t}=e;return`\n    font-family: ${t.typography.families.sansSerif};\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: flex-start;\n\n    &.no-trendline .subheader-line {\n      padding-bottom: 0.3em;\n    }\n\n    .text-container {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: flex-start;\n      .alert {\n        font-size: ${t.typography.sizes.s};\n        margin: -0.5em 0 0.4em;\n        line-height: 1;\n        padding: ${t.gridUnit}px;\n        border-radius: ${t.gridUnit}px;\n      }\n    }\n\n    .kicker {\n      line-height: 1em;\n      padding-bottom: 2em;\n    }\n\n    .header-line {\n      position: relative;\n      line-height: 1em;\n      span {\n        position: absolute;\n        bottom: 0;\n      }\n    }\n\n    .subheader-line {\n      line-height: 1em;\n      padding-bottom: 0;\n    }\n\n    &.is-fallback-value {\n      .kicker,\n      .header-line,\n      .subheader-line {\n        opacity: ${t.opacity.mediumHeavy};\n      }\n    }\n  `}}
`},63475:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(78580),i=n.n(r),a=n(67294),o=n(51995),s=n(29027),l=n(11965);const c=o.iK.div`
  height: ${e=>{let{height:t}=e;return t}};
  width: ${e=>{let{width:t}=e;return t}};
`;function h(e,t){let{width:n,height:r,echartOptions:o,eventHandlers:h,zrEventHandlers:d,selectedValues:u={}}=e;const m=(0,a.useRef)(null),p=(0,a.useRef)(),f=(0,a.useMemo)((()=>Object.keys(u)||[]),[u]),g=(0,a.useRef)([]);(0,a.useImperativeHandle)(t,(()=>({getEchartInstance:()=>p.current}))),(0,a.useEffect)((()=>{m.current&&(p.current||(p.current=(0,s.S1)(m.current)),Object.entries(h||{}).forEach((e=>{var t,n;let[r,i]=e;null==(t=p.current)||t.off(r),null==(n=p.current)||n.on(r,i)})),Object.entries(d||{}).forEach((e=>{var t,n;let[r,i]=e;null==(t=p.current)||t.getZr().off(r),null==(n=p.current)||n.getZr().on(r,i)})),p.current.setOption(o,!0))}),[o,h,d]),(0,a.useEffect)((()=>{p.current&&(p.current.dispatchAction({type:"downplay",dataIndex:g.current.filter((e=>!i()(f).call(f,e)))}),f.length&&p.current.dispatchAction({type:"highlight",dataIndex:f}),g.current=f)}),[f]);const y=(0,a.useCallback)((e=>{let{width:t,height:n}=e;p.current&&p.current.resize({width:t,height:n})}),[]);return(0,a.useEffect)((()=>{y({width:n,height:r})}),[]),(0,a.useLayoutEffect)((()=>{y({width:n,height:r})}),[n,r,y]),(0,l.tZ)(c,{ref:m,height:r,width:n})}const d=(0,a.forwardRef)(h)}}]);
//# sourceMappingURL=93b1089bea4e6a90c580.chunk.js.map